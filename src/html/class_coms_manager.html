<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SEII_Final_Project_Ivan_Martin: ComsManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">SEII_Final_Project_Ivan_Martin<span id="projectnumber">&#160;1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('class_coms_manager.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_coms_manager-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ComsManager Class Reference</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aefc48d1d92e8224e6bd49ebf9c53a8a2" id="r_aefc48d1d92e8224e6bd49ebf9c53a8a2"><td class="memItemLeft" align="right" valign="top"><a id="aefc48d1d92e8224e6bd49ebf9c53a8a2" name="aefc48d1d92e8224e6bd49ebf9c53a8a2"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ComsManager</b> ()</td></tr>
<tr class="memdesc:aefc48d1d92e8224e6bd49ebf9c53a8a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the <a class="el" href="class_coms_manager.html">ComsManager</a> class. <br /></td></tr>
<tr class="separator:aefc48d1d92e8224e6bd49ebf9c53a8a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affe6c776ad23278f11c0d2e37aca4468" id="r_affe6c776ad23278f11c0d2e37aca4468"><td class="memItemLeft" align="right" valign="top"><a id="affe6c776ad23278f11c0d2e37aca4468" name="affe6c776ad23278f11c0d2e37aca4468"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>~ComsManager</b> ()</td></tr>
<tr class="memdesc:affe6c776ad23278f11c0d2e37aca4468"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor for the <a class="el" href="class_coms_manager.html">ComsManager</a> class. <br /></td></tr>
<tr class="separator:affe6c776ad23278f11c0d2e37aca4468"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89abd51cbf18df1c2bb35e439a635a73" id="r_a89abd51cbf18df1c2bb35e439a635a73"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a89abd51cbf18df1c2bb35e439a635a73">initializeComs</a> ()</td></tr>
<tr class="memdesc:a89abd51cbf18df1c2bb35e439a635a73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes all communications.  <br /></td></tr>
<tr class="separator:a89abd51cbf18df1c2bb35e439a635a73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafe7625c9899ce270dfb1cbdc4a08a41" id="r_aafe7625c9899ce270dfb1cbdc4a08a41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aafe7625c9899ce270dfb1cbdc4a08a41">sendTelemetryData</a> (JsonDocument telemetryJson)</td></tr>
<tr class="memdesc:aafe7625c9899ce270dfb1cbdc4a08a41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends telemetry data over MQTT publish topic.  <br /></td></tr>
<tr class="separator:aafe7625c9899ce270dfb1cbdc4a08a41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b20758cefdd5139039a49d952b87dd2" id="r_a8b20758cefdd5139039a49d952b87dd2"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8b20758cefdd5139039a49d952b87dd2">getWiFiRSSI</a> ()</td></tr>
<tr class="memdesc:a8b20758cefdd5139039a49d952b87dd2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the Wi-Fi RSSI (Received Signal Strength Indication).  <br /></td></tr>
<tr class="separator:a8b20758cefdd5139039a49d952b87dd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c455b1634cddfd93d0ff9dfb0743b52" id="r_a9c455b1634cddfd93d0ff9dfb0743b52"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9c455b1634cddfd93d0ff9dfb0743b52">getLoRaRSSI</a> ()</td></tr>
<tr class="memdesc:a9c455b1634cddfd93d0ff9dfb0743b52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the LoRa RSSI (Received Signal Strength Indication).  <br /></td></tr>
<tr class="separator:a9c455b1634cddfd93d0ff9dfb0743b52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad80fa9b71f013a2a13cd3f135efa7718" id="r_ad80fa9b71f013a2a13cd3f135efa7718"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad80fa9b71f013a2a13cd3f135efa7718">getLoRaSNR</a> ()</td></tr>
<tr class="memdesc:ad80fa9b71f013a2a13cd3f135efa7718"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the LoRa SNR (Signal-to-Noise Ratio).  <br /></td></tr>
<tr class="separator:ad80fa9b71f013a2a13cd3f135efa7718"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabf1755b891a178b59f24b424e83716b" id="r_aabf1755b891a178b59f24b424e83716b"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aabf1755b891a178b59f24b424e83716b">getLoRaFreqError</a> ()</td></tr>
<tr class="memdesc:aabf1755b891a178b59f24b424e83716b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the LoRa frequency error.  <br /></td></tr>
<tr class="separator:aabf1755b891a178b59f24b424e83716b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab74983681c7a71215c5b9dac2dfd67c1" id="r_ab74983681c7a71215c5b9dac2dfd67c1"><td class="memItemLeft" align="right" valign="top"><a id="ab74983681c7a71215c5b9dac2dfd67c1" name="ab74983681c7a71215c5b9dac2dfd67c1"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setLoRaRSSI</b> ()</td></tr>
<tr class="memdesc:ab74983681c7a71215c5b9dac2dfd67c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the LoRa RSSI (Received Signal Strength Indication). <br /></td></tr>
<tr class="separator:ab74983681c7a71215c5b9dac2dfd67c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19a493809882523b10eb1119786a509b" id="r_a19a493809882523b10eb1119786a509b"><td class="memItemLeft" align="right" valign="top"><a id="a19a493809882523b10eb1119786a509b" name="a19a493809882523b10eb1119786a509b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setLoRaSNR</b> ()</td></tr>
<tr class="memdesc:a19a493809882523b10eb1119786a509b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the LoRa SNR (Signal-to-Noise Ratio). <br /></td></tr>
<tr class="separator:a19a493809882523b10eb1119786a509b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69128db5737fd0cd0ffc05fdde7825d5" id="r_a69128db5737fd0cd0ffc05fdde7825d5"><td class="memItemLeft" align="right" valign="top"><a id="a69128db5737fd0cd0ffc05fdde7825d5" name="a69128db5737fd0cd0ffc05fdde7825d5"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setLoRaFreqError</b> ()</td></tr>
<tr class="memdesc:a69128db5737fd0cd0ffc05fdde7825d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the LoRa frequency error. <br /></td></tr>
<tr class="separator:a69128db5737fd0cd0ffc05fdde7825d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8662ee27b8a40349f0cda6a452997a7" id="r_af8662ee27b8a40349f0cda6a452997a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af8662ee27b8a40349f0cda6a452997a7">serialWifiComunication</a> ()</td></tr>
<tr class="memdesc:af8662ee27b8a40349f0cda6a452997a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the bridge for serial to WiFi communication.  <br /></td></tr>
<tr class="separator:af8662ee27b8a40349f0cda6a452997a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a228b66980cebf2c881f513398d1ca7a1" id="r_a228b66980cebf2c881f513398d1ca7a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a228b66980cebf2c881f513398d1ca7a1">receivePackageUsingLora</a> ()</td></tr>
<tr class="memdesc:a228b66980cebf2c881f513398d1ca7a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receives a package using LoRa communication.  <br /></td></tr>
<tr class="separator:a228b66980cebf2c881f513398d1ca7a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aabf1755b891a178b59f24b424e83716b" name="aabf1755b891a178b59f24b424e83716b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabf1755b891a178b59f24b424e83716b">&#9670;&#160;</a></span>getLoRaFreqError()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float ComsManager::getLoRaFreqError </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the LoRa frequency error. </p>
<dl class="section return"><dt>Returns</dt><dd>The LoRa frequency error value in Hz. </dd></dl>

</div>
</div>
<a id="a9c455b1634cddfd93d0ff9dfb0743b52" name="a9c455b1634cddfd93d0ff9dfb0743b52"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9c455b1634cddfd93d0ff9dfb0743b52">&#9670;&#160;</a></span>getLoRaRSSI()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float ComsManager::getLoRaRSSI </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the LoRa RSSI (Received Signal Strength Indication). </p>
<dl class="section return"><dt>Returns</dt><dd>The LoRa RSSI value in dB. </dd></dl>

</div>
</div>
<a id="ad80fa9b71f013a2a13cd3f135efa7718" name="ad80fa9b71f013a2a13cd3f135efa7718"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad80fa9b71f013a2a13cd3f135efa7718">&#9670;&#160;</a></span>getLoRaSNR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float ComsManager::getLoRaSNR </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the LoRa SNR (Signal-to-Noise Ratio). </p>
<dl class="section return"><dt>Returns</dt><dd>The LoRa SNR value in dB. </dd></dl>

</div>
</div>
<a id="a8b20758cefdd5139039a49d952b87dd2" name="a8b20758cefdd5139039a49d952b87dd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b20758cefdd5139039a49d952b87dd2">&#9670;&#160;</a></span>getWiFiRSSI()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float ComsManager::getWiFiRSSI </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the Wi-Fi RSSI (Received Signal Strength Indication). </p>
<dl class="section return"><dt>Returns</dt><dd>The Wi-Fi RSSI value if connected, if it is not connected it attempt a reconnection and returns 0. </dd></dl>

</div>
</div>
<a id="a89abd51cbf18df1c2bb35e439a635a73" name="a89abd51cbf18df1c2bb35e439a635a73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89abd51cbf18df1c2bb35e439a635a73">&#9670;&#160;</a></span>initializeComs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ComsManager::initializeComs </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes all communications. </p>
<p>Creates MQTT topics ("cadse/2023/broadcast" and "cadse/2023/16/"). Initializes Wi-Fi or eduroam connection. Initializes LoRa communication. Finally it sets up MQTT server and the callback function for receiving packages via MQTT subscription, and initializes MQTT. </p>

</div>
</div>
<a id="a228b66980cebf2c881f513398d1ca7a1" name="a228b66980cebf2c881f513398d1ca7a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a228b66980cebf2c881f513398d1ca7a1">&#9670;&#160;</a></span>receivePackageUsingLora()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ComsManager::receivePackageUsingLora </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Receives a package using LoRa communication. </p>
<p>If the receivedLora flag is true, the function reaads the data from the LoRa module and converts it to String. It then stores the data in a global variable and sets the flag back to false. If an error ocurrs it print in the Serial. </p>

</div>
</div>
<a id="aafe7625c9899ce270dfb1cbdc4a08a41" name="aafe7625c9899ce270dfb1cbdc4a08a41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafe7625c9899ce270dfb1cbdc4a08a41">&#9670;&#160;</a></span>sendTelemetryData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ComsManager::sendTelemetryData </td>
          <td>(</td>
          <td class="paramtype">JsonDocument</td>          <td class="paramname"><span class="paramname"><em>telemetryJson</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends telemetry data over MQTT publish topic. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">telemetryJson</td><td>The JSON document containing telemetry data.</td></tr>
  </table>
  </dd>
</dl>
<p>The function receives a JsonDocument and per Key creates a topic to publish the value. If the sendTelemetry flag is true, it check the MQTT conection and publishes the data. Finally it sets back the flag to false. </p>

</div>
</div>
<a id="af8662ee27b8a40349f0cda6a452997a7" name="af8662ee27b8a40349f0cda6a452997a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8662ee27b8a40349f0cda6a452997a7">&#9670;&#160;</a></span>serialWifiComunication()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ComsManager::serialWifiComunication </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates the bridge for serial to WiFi communication. </p>
<p>Function that stablishes a connection to possible multiple WiFi clients between Serial and WiFi. If success the connection is printed in the Serial. Using telnet, the communication between the satellite serial and WiFi is possible. IMPORTANT: This method is only implemented for testing purposes. Not used in proyect final deployment. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>lib/Communications/<a class="el" href="_coms_manager_8h_source.html">ComsManager.h</a></li>
<li>lib/Communications/<a class="el" href="_coms_manager_8cpp.html">ComsManager.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_coms_manager.html">ComsManager</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
